.panel.panel-primary
  .panel-heading 
    h3.panel-title.title
      = @question.title
      .pull-right
        .label.label-info
          span id = "question_rating_#{@question.id}"
            =@question.rating
        = @question.user_email
  .panel.body
    = @question.body
  .attachments
    ul
    - @question.attachments.each do |a|
        li= link_to a.file_name, a.file.url 
  .panel-footer
    .tags
      - @question.tags.each do |t|
        = link_to t.name, tag_search_path(t.name)
        | &nbsp
    |&nbsp
    .pull-right 
      = link_to(edit_icon, edit_question_path(@question), id: "edit_question_#{@question.id}") if can? :edit, @question
        | &nbsp
      .vote_controls
        = link_to vote_up_icon, question_vote_up_path(@question), method: :patch, remote: true, "data-type" => "json" if can? :rate, @question
        | &nbsp
        = link_to vote_down_icon, question_vote_down_path(@question), method: :patch, remote: true, "data-type" => "json" if can? :rate, @question
        | &nbsp

      
      
  .comments
    = render partial: 'comments/comments', locals: { commentable: @question }
    
  - if can? :write, Comment
    = link_to 'comment', comments_new_path(commentable: @question.class.to_s, commentable_id: @question.id), remote: true, id: "comment_#{@question.class.to_s.underscore}#{@question.id}"
    div id = ("comment_form_#{@question.class.to_s.underscore}_#{@question.id}")
    
      
  - if can? :ask, Question
    .panel.panel-info.new-answer
      .panel-heading
        ' Answer
        .answer-errors
      .panel-body
        .answer_form
          = render( partial: 'answers/form', locals: { question: @question, answer: @answer }) 

- if user_signed_in?
  script#answer-template[type="text/x-handlebars-template"]
    = render 'answers/answer.handlebars'

= subscribe_to "/questions"

.foo